%h2 Search Order

= form_with url: orders_path, method: :get do |form|
  %b Number
  = form.text_field :number, value: params[:number]
  = form.submit 'Search'

  %h2 Order List

  %table.table
    %thead
      %tr
        %th Number
        %th State
        %th User Email
        %th User Name
        %th Actions
    %tbody
      - @paged_orders.paged_records.each do |order|
        %tr
          %td= order.number
          %td= order.state
          %td= order.user.email
          %td= order.user.name
          %td
            - unless order.state == Order::CANCELED
              = link_to 'Cancel Order', cancel_order_path(order), method: :post

  %p
    %span Total records:
    = @paged_orders.records.count

  - @paged_orders.pages.each do |number|
    = link_to number, orders_path(params.permit(:page, :number).merge(page: number))
